<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="" />
  <meta name="author" content="and contributors" />
   <title>Experimentos com pêndulos</title>  
  <link rel="shortcut icon" type="image/png" href="/modelagem_matematica/assets/images/favicon.png"/>
  <link rel="stylesheet" href="/modelagem_matematica/css/base.css"/>
  
  <script src="/modelagem_matematica/libs/mousetrap/mousetrap.min.js"></script>

  
    <link rel="stylesheet" href="/modelagem_matematica/libs/highlight/github.min.css">
    <script src="/modelagem_matematica/libs/highlight/highlight.pack.js"></script>
    <script src="/modelagem_matematica/libs/highlight/julia.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
        document.querySelectorAll('pre').forEach((el) => {
          hljs.highlightElement(el);
        });
      });
    </script>
  

  
</head>

<body>

  <div class="books-container">

  <aside class="books-menu">
  <input type="checkbox" id="menu">
  <label for="menu">☰</label>

  <div class="books-title">
    <a href="/modelagem_matematica/">Modelagem Matemática</a>
  </div>

  <br />

  <div class="books-subtitle">
    Notas de aula
  </div>

  <br />

  <div class="books-author">
    <a href="https://rmsrosa.github.io">Ricardo M. S. Rosa</a>
  </div>

  <div class="books-menu-content">
    <div class="menu-level-1">
    <li><a href="/modelagem_matematica/pages/intro">Introdução</a></li>
    </div>
    <div class="menu-level-1">
    <li>PARTE I</li>
    </div>
    <div class="menu-level-1">
    <li>1. Preliminares</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c01/0101-Aspectos_curso">1.1. Aspectos do curso</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c01/0102-Instalando_acessando_Julia">1.2. Instalando e acessando o Julia</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c01/0103-Primeiros_passos_Julia">1.3. Primeiros passos em Julia</a></li>
    </div>
    <div class="menu-level-1">
    <li>PARTE II</li>
    </div>
    <div class="menu-level-1">
    <li>2. Princípios de Modelagem Matemática</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c02/0201-Principios_basicos">2.1. Princípios básicos de modelagem</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c02/0202-Exemplos_tipos_modelagem">2.2. Exemplos de tipos de modelagem</a></li>
    </div>
    <div class="menu-level-1">
    <li>3. Análise Dimensional</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c03/0301-Quantidades_unidades_dimensoes">3.1. Quantidades, unidades e dimensões</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c03/0302-BuckinghamPi">3.2. Análise dimensional e o Teorema de Buckingham-Pi</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c03/0303-Unidades_Julia">3.3. Trabalhando com unidades e dimensões em Julia</a></li>
    </div>
    <div class="menu-level-1">
    <li>4. Ajuste de Parâmetros</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0401-Minimos_quadrados_ajuste">4.1. Mínimos quadrados e o ajuste de parâmetros</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0402-Exemplos_ajuste_linear">4.2. Exemplos de ajuste linear</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0403-Modelos_redutiveis_linear_aplicacoes">4.3. Modelos redutíveis ao caso linear nos parâmetros e aplicações</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0404-Minimos_quadrados_nao_linear">4.4. Mínimos quadrados não-linear</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0405-Exemplos_ajuste_naolinear">4.5. Exemplos de ajuste não-linear de parâmetros</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0406-Redes_neurais">4.6. Redes neurais</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c04/0407-Ajuste_em_redes_neurais">4.7. Ajuste de parâmetros em modelos de redes neurais</a></li>
    </div>
    <div class="menu-level-1">
    <li>5. Erros e Incertezas</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c05/0501-Erros_e_incertezas">5.1. Erros e incertezas</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c05/0502-Minimos_quadrados_verossimilhanca">5.2. Mínimos quadrados, maximização da verossimilhança e quantificação de incertezas em regressões lineares</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c05/0503-Propagacao_incertezas">5.3. Propagação de incertezas</a></li>
    </div>
    <div class="menu-level-1">
    <li>6. Avaliação de Modelos</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c06/0601-Qualidade_do_modelo">6.1. Qualidade do ajuste</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c06/0602-Validacao_do_modelo">6.2. Validação de modelos</a></li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c06/0603-Comparacao_de_modelos">6.3. Comparação de modelos</a></li>
    </div>
    <div class="menu-level-1">
    <li>PARTE III</li>
    </div>
    <div class="menu-level-1">
    <li>7. Mecânica</li>
    </div>
    <div class="menu-level-2">
    <li><a href="/modelagem_matematica/pages/jupytered/c07/0701-Mecanica_Newtoniana">7.1. Mecânica Newtoniana</a></li>
    </div>
<div>


  
    <a href="https://github.com/rmsrosa/modelagem_matematica/tree/modmat2022p1"><img src="/modelagem_matematica/assets/images/GitHub-Mark-32px.png" alt="GitHub repo" width="18" style="margin:5px 5px" align="left"></a>

  

</aside>


  <div class="books-content">

    
      
    

    
      <div class="badges">
<p>
<a href="https://nbviewer.org/urls/rmsrosa.github.io/modelagem_matematica/generated/jupytered/c07/0707-Pendulo_angulos_grandes.ipynb"><img align="left" src="https://img.shields.io/badge/view%20in-nbviewer-orange" alt="View in NBViewer" title="View Jupyter notebook in NBViewer"></a>
<a href="https://mybinder.org/v2/gh/rmsrosa/modelagem_matematica/julia-env-for-binder-2022p1?urlpath=git-pull%3Frepo%3Dhttps://github.com/rmsrosa/modelagem_matematica%26urlpath%3Dlab/tree%252Fmodelagem_matematica/generated/jupytered/c07/0707-Pendulo_angulos_grandes.ipynb%26branch%3Dgh-pages"><img align="left" src="https://mybinder.org/badge.svg" alt="Open in binder" title="Open in binder"></a>
<a href="/modelagem_matematica/generated/jupytered/c07/0707-Pendulo_angulos_grandes.ipynb"><img align="left" src="https://img.shields.io/badge/download-notebook-blue" alt="Download notebook" title="Download Jupyter notebook"></a>
<a href="nothing"><img align="left" src="https://img.shields.io/badge/view-source-lightblue" alt="View source" title="View source"></a>
</p>
</div></br>

    
<h1 id="get_title"><a href="#get_title" class="header-anchor">Title not found</a></h1>
<pre><code class="language-julia">using Base64
using StatsBase
using CSV
using DataFrames</code></pre>
<pre><code class="language-julia">using Images
using ImageDraw
using VideoIO</code></pre>
<pre><code class="language-julia">using Plots</code></pre>
<pre><code class="language-julia">using Optim</code></pre>
<pre><code class="language-julia">using DifferentialEquations.OrdinaryDiffEq
using DifferentialEquations.RecursiveArrayTools</code></pre>
<pre><code class="language-julia">include&#40;&quot;scripts/DisplayMovie.jl&quot;&#41;
include&#40;&quot;scripts/VideoTracking.jl&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: SystemError: opening file &quot;/Users/rmsrosa/Documents/git-repositories
/modelagem_matematica/src/jupyter/c07/scripts/DisplayMovie.jl&quot;: No such fil
e or directory</code></pre>
<pre><code class="language-julia">filename &#61; &quot;img/pendulo_70cm_1_reduzido_curto.mp4&quot;
vd &#61; VideoIO.load&#40;filename&#41;</code></pre>
<pre><code class="language-julia">Error: Could not open img/pendulo_70cm_1_reduzido_curto.mp4. avformat_open_
input error code -2</code></pre>
<pre><code class="language-julia">typeof&#40;copy&#40;vd&#91;1&#93;&#41;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">println&#40;&quot;Duração do vídeo: &#36;&#40;VideoIO.get_duration&#40;filename&#41;&#41; s&quot;&#41;
println&#40;&quot;Número de quadros: &#36;&#40;length&#40;vd&#41;&#41;&quot;&#41;
println&#40;&quot;Número médio de quadros por segundo: &#36;&#40;length&#40;vd&#41;/VideoIO.get_duration&#40;filename&#41;&#41;&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: Could not open img/pendulo_70cm_1_reduzido_curto.mp4. avformat_open_
input error code -2</code></pre>
<pre><code class="language-julia"># video completo
filename_completo &#61; &quot;img/pendulo_70cm_1_reduzido.mov&quot;
vd_completo &#61; VideoIO.load&#40;filename_completo&#41;
println&#40;&quot;&quot;&quot;Duração do vídeo: &#36;&#40;VideoIO.get_duration&#40;filename_completo&#41;&#41; s&quot;&quot;&quot;&#41;
println&#40;&quot;Número de quadros: &#36;&#40;length&#40;vd_completo&#41;&#41;&quot;&#41;
println&#40;&quot;&quot;&quot;Número médio de quadros por segundo: &#36;&#40;length&#40;vd_completo&#41;/VideoIO.get_duration&#40;filename_completo&#41;&#41;&quot;&quot;&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: Could not open img/pendulo_70cm_1_reduzido.mov. avformat_open_input 
error code -2</code></pre>
<pre><code class="language-julia">vd&#91;1&#93;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">DisplayMovie.display_movie&#40;&quot;img/pendulo_70cm_1_reduzido_curto.mp4&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: DisplayMovie not defined</code></pre>
<pre><code class="language-julia">background &#61; convert.&#40;RGB&#123;Float16&#125;, vd&#91;1&#93;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">convert.&#40;RGB&#123;Float16&#125;, vd&#91;54&#93;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">convert.&#40;Gray&#123;Float16&#125;, abs.&#40;convert.&#40;RGB&#123;Float16&#125;, vd&#91;54&#93;&#41; - background&#41;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">threshold &#61; 0.1
mask &#61; convert.&#40;
    Gray&#123;Float16&#125;,
    abs.&#40;
        convert.&#40;RGB&#123;Float16&#125;, vd&#91;54&#93;&#41; - 
        background
    &#41;
&#41; .&gt; threshold</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">convert.&#40;Gray&#123;Float16&#125;, mask&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: mask not defined</code></pre>
<pre><code class="language-julia">labeled_components &#61; label_components&#40;mask&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: mask not defined</code></pre>
<pre><code class="language-julia">@which label_components&#40;mask&#41;</code></pre>
<pre><code class="language-julia">Error: LoadError: UndefVarError: @which not defined
in expression starting at /Users/rmsrosa/Documents/git-repositories/modelag
em_matematica/src/jupyter/c07/0707-Pendulo_angulos_grandes.ipynb:2</code></pre>
<pre><code class="language-julia">?label_components</code></pre>
<pre><code class="language-julia">Error: syntax: invalid identifier name &quot;?&quot;</code></pre>
<pre><code class="language-julia">colorset &#61; distinguishable_colors&#40;maximum&#40;labeled_components&#41;&#43;1, colorant&quot;black&quot;, dropseed &#61; false&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: labeled_components not defined</code></pre>
<pre><code class="language-julia">labeled_components</code></pre>
<pre><code class="language-julia">Error: UndefVarError: labeled_components not defined</code></pre>
<pre><code class="language-julia">coloredmask &#61; map&#40; n -&gt; colorset&#91;n&#43;1&#93;, labeled_components&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: labeled_components not defined</code></pre>
<pre><code class="language-julia">maximum&#40;labeled_components&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: labeled_components not defined</code></pre>
<pre><code class="language-julia">components_location &#61; VideoTracking.locate_components&#40;labeled_components&#41;
min_area &#61; 1
filter&#33;&#40;p -&gt; p.area ≥ min_area, components_location&#41;
length&#40;components_location&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">components_location &#61; VideoTracking.locate_components&#40;labeled_components&#41;
min_area &#61; 10
filter&#33;&#40;p -&gt; p.area ≥ min_area, components_location&#41;
length&#40;components_location&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">vd54 &#61; copy&#40;vd&#91;54&#93;&#41;
for p in components_location
    draw&#33;&#40;vd54, Polygon&#40;VideoTracking.RectanglePoints&#40;p&#41;&#41;, colorant&quot;red&quot;&#41;
end
vd54</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">components_location &#61; VideoTracking.locate_components&#40;labeled_components&#41;
min_area &#61; 100
filter&#33;&#40;p -&gt; p.area ≥ min_area, components_location&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">vd54 &#61; copy&#40;vd&#91;54&#93;&#41;
for p in components_location
    draw&#33;&#40;vd54, Polygon&#40;VideoTracking.RectanglePoints&#40;p&#41;&#41;, colorant&quot;red&quot;&#41;
end
vd54</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">components_location &#61; VideoTracking.locate_components&#40;labeled_components&#41;
min_area &#61; 200
filter&#33;&#40;p -&gt; p.area ≥ min_area, components_location&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">p &#61; components_location&#91;1&#93;
draw&#40;vd&#91;54&#93;, Polygon&#40;VideoTracking.RectanglePoints&#40;p&#41;&#41;, colorant&quot;red&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: components_location not defined</code></pre>
<pre><code class="language-julia">filename &#61; &quot;img/pendulo_70cm_1_reduzido_curto.mp4&quot;
tracks_70cm1 &#61; VideoTracking.find_tracks&#40;filename&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">VideoTracking.tracks_on_video&#40;filename, tracks_70cm1&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: VideoTracking not defined</code></pre>
<pre><code class="language-julia">DisplayMovie.display_movie&#40;&quot;img/pendulo_70cm_1_reduzido_curto_tracked.mp4&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: DisplayMovie not defined</code></pre>
<pre><code class="language-julia">tracks_70cm1</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">tracks_70cm1&#91;1&#93;.nspan</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">tracks_70cm1&#91;1&#93;.path</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">tracks_70cm1&#91;1&#93;.path&#91;1&#93;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Paths of &#36;&#40;length&#40;tracks_70cm1&#41;&#41; track&#40;s&#41;&quot;, titlefont &#61; 10,
    xlims &#61; &#40;1,854&#41;, ylims &#61; &#40;1, 480&#41;,
    size &#61; &#40;854, 480&#41;, aspect &#61; :equal, legend&#61;:topright&#41;
for &#40;n, tr&#41; in enumerate&#40;tracks_70cm1&#41;
    scatter&#33;&#40;plt, getfield.&#40;tr.path, :x&#41;, 481 .- getfield.&#40;tr.path, :y&#41;, label&#61;&quot;track &#36;n&quot;&#41;
end
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Coordinate x of &#36;&#40;length&#40;tracks_70cm1&#41;&#41; tracks&quot;, titlefont &#61; 10, legend&#61;:topleft&#41;
for &#40;n, tr&#41; in enumerate&#40;tracks_70cm1&#41;
    scatter&#33;&#40;plt, tr.nspan, getfield.&#40;tr.path, :x&#41;, label&#61;&quot;track &#36;n&quot;&#41;
end
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Coordinate y of &#36;&#40;length&#40;tracks_70cm1&#41;&#41; tracks&quot;, titlefont &#61; 10, legend&#61;:topright&#41;
for &#40;n, tr&#41; in enumerate&#40;tracks_70cm1&#41;
    scatter&#33;&#40;plt, tr.nspan, - getfield.&#40;tr.path, :y&#41;, label&#61;&quot;track &#36;n&quot;&#41;
end
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">size&#40;vd&#91;1&#93;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: vd not defined</code></pre>
<pre><code class="language-julia">data_x &#61; getfield.&#40;tracks_70cm1&#91;1&#93;.path, :x&#41;
data_y &#61; size&#40;vd&#91;1&#93;, 1&#41; &#43; 1 .- getfield.&#40;tracks_70cm1&#91;1&#93;.path, :y&#41;
nothing</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">n_minima &#61; Int&#91;&#93;
for j in 40:length&#40;data_x&#41;-1
    if data_x&#91;j-1&#93; &gt; data_x&#91;j&#93; &lt; data_x&#91;j&#43;1&#93;
        push&#33;&#40;n_minima, j &#43; first&#40;tracks_70cm1&#91;1&#93;.nspan&#41; - 1&#41;
    end
end
n_minima</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data_x not defined</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Coordinate x of &#36;&#40;length&#40;tracks_70cm1&#41;&#41; tracks&quot;, titlefont &#61; 10, legend&#61;:topleft&#41;
for &#40;n, tr&#41; in enumerate&#40;tracks_70cm1&#41;
    scatter&#33;&#40;plt, tr.nspan, getfield.&#40;tr.path, :x&#41;, label&#61;&quot;track &#36;n&quot;&#41;
end
vline&#33;&#40;plt, n_minima, label &#61; &quot;minima&quot;&#41;
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">&#40;n_minima&#91;2:end&#93; - n_minima&#91;1:end-1&#93;&#41; / 29.5</code></pre>
<pre><code class="language-julia">Float64&#91;&#93;</code></pre>
<pre><code class="language-julia">g &#61; 9.8 # m/s
l &#61; 0.7 # m
T_p &#61; 2π * √&#40;l / g&#41;</code></pre>
<pre><code class="language-julia">1.679251908362714</code></pre>
<pre><code class="language-julia">function medias&#40;a::Real, b::Real&#41;
    &#40;a ≥ 0 &amp;&amp; b ≥ 0&#41; || throw&#40;ArgumentError&#40;&quot;arguments must be nonnegative&quot;&#41;&#41;
    ma &#61; &#40;a &#43; b&#41;/2
    mg &#61; sqrt&#40;a * b&#41;
    return ma, mg
end

function agm&#40;a::Real, b::Real; tol::Real &#61; 1e-10, maxiter::Int &#61; 100&#41;
    tol &gt; 0 || throw&#40;ArgumentError&#40;&quot;tolerance must be positive&quot;&#41;&#41;
    maxiter &gt; 0 || throw&#40;ArgumentError&#40;&quot;maximum number of iterations must be positive&quot;&#41;&#41;
    y1, y2 &#61; a, b
    n &#61; 0
    while abs&#40;y1 - y2&#41; &gt; tol &amp;&amp; n &lt; maxiter
        y1, y2 &#61; medias&#40;y1, y2&#41;
        n &#43;&#61; 1
    end
    return &#40;y1 &#43; y2&#41;/2, abs&#40;y1 - y2&#41;, n
end</code></pre>
<pre><code class="language-julia">agm &#40;generic function with 1 method&#41;</code></pre>
<pre><code class="language-julia">θ₀ &#61; π / 4
T_p / agm&#40;1, cos&#40;θ₀ / 2&#41;&#41;&#91;1&#93;</code></pre>
<pre><code class="language-julia">1.7463772212095845</code></pre>
<h3 id="escala"><a href="#escala" class="header-anchor">Escala</a></h3>
<ul>
<li><p>Vamos fazer ajustar um circunferência ao movimento do pêndulo, para descobrir a escala espacial.</p>
</li>
</ul>
<pre><code class="language-julia">error&#40;u&#41; &#61; sum&#40;
    abs2,
    &#40;data_x&#91;50:end&#93; .- u&#91;1&#93;&#41;.^2 &#43; &#40;data_y&#91;50:end&#93; .- u&#91;2&#93;&#41;.^2 .- u&#91;3&#93;^2
    &#41; / length&#40;data_x&#41;</code></pre>
<pre><code class="language-julia">error &#40;generic function with 1 method&#41;</code></pre>
<pre><code class="language-julia">center_point &#61; Optim.optimize&#40;error, &#91;400.0, 800.0, 500&#93;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data_x not defined</code></pre>
<pre><code class="language-julia">Optim.minimum&#40;center_point&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: center_point not defined</code></pre>
<pre><code class="language-julia">center_nx, center_ny, radius_n &#61; Optim.minimizer&#40;center_point&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: center_point not defined</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Paths of &#36;&#40;length&#40;tracks_70cm1&#41;&#41; track&#40;s&#41;&quot;, titlefont &#61; 10,
    xlims &#61; &#40;1,854&#41;, ylims &#61; &#40;1, 600&#41;,
    size &#61; &#40;854, 600&#41;, aspect &#61; :equal, legend&#61;:topright&#41;
for &#40;n, tr&#41; in enumerate&#40;tracks_70cm1&#41;
    scatter&#33;&#40;plt, data_x, data_y, label&#61;&quot;track &#36;n&quot;&#41;
end
scatter&#33;&#40;plt, &#40;center_nx, center_ny&#41;, markersize &#61; 10&#41;
plot&#33;&#40;plt, 1:854, nx -&gt; center_ny - √&#40;radius_n^2 - &#40;nx - center_nx&#41;^2&#41;, linestyle &#61; :dash&#41;
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: tracks_70cm1 not defined</code></pre>
<pre><code class="language-julia">scale &#61; radius_n / l # points per meter</code></pre>
<pre><code class="language-julia">Error: UndefVarError: radius_n not defined</code></pre>
<pre><code class="language-julia">data_scaled_x &#61; &#40;data_x .- center_nx&#41; / scale
data_scaled_y &#61; &#40;data_y .- center_ny&#41; / scale</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data_x not defined</code></pre>
<pre><code class="language-julia">function dudt_pendulum&#33;&#40;du, u, p, t&#41;
    θ, ω &#61; u
    l, g, α &#61; p
    du&#91;1&#93; &#61; ω
    du&#91;2&#93; &#61; - &#40;g / l&#41; * sin&#40;θ&#41; - α * ω
end</code></pre>
<pre><code class="language-julia">dudt_pendulum&#33; &#40;generic function with 1 method&#41;</code></pre>
<pre><code class="language-julia">g &#61; 9.8 # 9,8 m/s^2
l &#61; 0.7 # 70 cm
α &#61; 0
p &#61; &#91;l, g, α&#93;
θ₀ &#61; π/6
ω₀ &#61; 0.0
u₀ &#61; &#91;θ₀, ω₀&#93;
tspan &#61; &#40;0.0, 5.0&#41; # até 5 segundos
prob_pendulum &#61; ODEProblem&#40;dudt_pendulum&#33;, u₀, tspan, p&#41;</code></pre>
<pre><code class="language-julia">ODEProblem with uType Vector&#123;Float64&#125; and tType Float64. In-place: true
timespan: &#40;0.0, 5.0&#41;
u0: 2-element Vector&#123;Float64&#125;:
 0.5235987755982988
 0.0</code></pre>
<pre><code class="language-julia">sol &#61; solve&#40;prob_pendulum, Tsit5&#40;&#41;&#41;</code></pre>
<pre><code class="language-julia">retcode: Success
Interpolation: specialized 4th order &quot;free&quot; interpolation
t: 32-element Vector&#123;Float64&#125;:
 0.0
 0.00014258482589892232
 0.0015684330848881453
 0.015826915674780374
 0.05520287578278107
 0.1186994834079412
 0.20021318382712075
 0.3059148580456768
 0.4289016257510082
 0.556918677400161
 ⋮
 3.336085982741865
 3.5798111245515645
 3.789943545334064
 4.033677951692835
 4.248777445772274
 4.4897245954065665
 4.712943195270591
 4.948794481749135
 5.0
u: 32-element Vector&#123;Vector&#123;Float64&#125;&#125;:
 &#91;0.5235987755982988, 0.0&#93;
 &#91;0.5235987044417862, -0.000998093740288535&#93;
 &#91;0.5235901656815024, -0.01097897701799843&#93;
 &#91;0.52272227807514, -0.1107323314966049&#93;
 &#91;0.5129658631370241, -0.3840406425996626&#93;
 &#91;0.4749871723737738, -0.8072478724104671&#93;
 &#91;0.38897468427160925, -1.2882714483013225&#93;
 &#91;0.22681172050256487, -1.7418841189469372&#93;
 &#91;-0.0034489023047863383, -1.936781391381158&#93;
 &#91;-0.24165889846355013, -1.7139642610036754&#93;
 ⋮
 &#91;0.5009792538381039, 0.5577247215218519&#93;
 &#91;0.43312617648070506, -1.0800631782759451&#93;
 &#91;0.10380905787269706, -1.8977493321783012&#93;
 &#91;-0.33772189369520583, -1.4733195325856954&#93;
 &#91;-0.5219374197998773, -0.15523391826013316&#93;
 &#91;-0.36422595366369465, 1.3840456727974355&#93;
 &#91;0.02882117308366698, 1.9341610901039223&#93;
 &#91;0.41822224613478143, 1.157201337942282&#93;
 &#91;0.4697150850563418, 0.8484644241876123&#93;</code></pre>

<pre><code class="language-julia">display&#40;plot&#40;sol, label &#61; &#91;&quot;θ&#40;t&#41;&quot; &quot;ω&#40;t&#41;&quot;&#93;&#41;&#41;
display&#40;plot&#40;sol, vars &#61; 1, label &#61; &quot;θ&#40;t&#41;&quot;&#41;&#41;</code></pre>
<p><img src="/modelagem_matematica/assets/pages/jupytered/c07/0707-Pendulo_angulos_grandes/code/images/0707-Pendulo_angulos_grandes_61_1.png" alt=""> <img src="/modelagem_matematica/assets/pages/jupytered/c07/0707-Pendulo_angulos_grandes/code/images/0707-Pendulo_angulos_grandes_61_2.png" alt=""></p>
<pre><code class="language-julia">n0 &#61; 34
plt &#61; plot&#40;sol, vars &#61; 1, label &#61; &quot;θ&#40;t&#41;&quot;&#41;
scatter&#33;&#40;plt, &#40;0:length&#40;data_x&#41;-n0&#41; ./ 29.5, data_scaled_x&#91;n0:end&#93;, label&#61;&quot;tracked&quot;&#41;
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data_x not defined</code></pre>
<pre><code class="language-julia">df &#61; CSV.read&#40;&quot;data/pendulo_70cm_reduzido.csv&quot;, DataFrame&#41;</code></pre>
<pre><code class="language-julia">Error: ArgumentError: &quot;data/pendulo_70cm_reduzido.csv&quot; is not a valid file 
or doesn&#39;t exist</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Coordinate x&quot;, titlefont &#61; 10, legend&#61;:topleft&#41;
scatter&#33;&#40;plt, df.nf, df.nx, label &#61; nothing&#41;
display&#40;plt&#41;

plt &#61; plot&#40;title &#61; &quot;Coordinate y&quot;, titlefont &#61; 10, legend&#61;:topleft&#41;
scatter&#33;&#40;plt, df.nf, size&#40;vd&#91;1&#93;, 1&#41; .&#43; 1 .- df.ny, label &#61; nothing&#41;
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: df not defined</code></pre>
<pre><code class="language-julia">data2_scaled_t &#61; &#40;df.nf&#91;n0:end&#93; .- df.nf&#91;n0&#93;&#41; / 29.97
data2_scaled_x &#61; &#40;df.nx&#91;n0:end&#93; .- center_nx&#41; / scale
data2_scaled_y &#61; &#40;size&#40;vd&#91;1&#93;, 1&#41; .&#43; 1 .- df.ny&#91;n0:end&#93; .- center_ny &#41; / scale
display&#40;scatter&#40;data2_scaled_t, data2_scaled_x&#41;&#41;
display&#40;scatter&#40;data2_scaled_t, data2_scaled_y&#41;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: df not defined</code></pre>
<pre><code class="language-julia">n_minima2 &#61; Int&#91;&#93;
for j in 40:length&#40;df.nx&#41;-1
    if df.nx&#91;j-1&#93; &gt; df.nx&#91;j&#93; &lt; df.nx&#91;j&#43;1&#93;
        push&#33;&#40;n_minima2, j &#43; df.nf&#91;1&#93; - 1&#41;
    end
end
n_minima2</code></pre>
<pre><code class="language-julia">Error: UndefVarError: df not defined</code></pre>
<pre><code class="language-julia">&#40;n_minima2&#91;2:end&#93; - n_minima2&#91;1:end-1&#93;&#41;/30</code></pre>
<pre><code class="language-julia">Float64&#91;&#93;</code></pre>
<pre><code class="language-julia">sum&#40;n_minima2&#91;2:end&#93; - n_minima2&#91;1:end-1&#93;&#41;/7/30</code></pre>
<pre><code class="language-julia">0.0</code></pre>
<pre><code class="language-julia">plt &#61; plot&#40;title &#61; &quot;Coordinate x&quot;, titlefont &#61; 10, legend&#61;:topleft&#41;
scatter&#33;&#40;plt, df.nf, df.nx, label &#61; &quot;data&quot;&#41;
vline&#33;&#40;plt, n_minima2, label &#61; &quot;minima&quot;&#41;
display&#40;plt&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: df not defined</code></pre>
<pre><code class="language-julia">g &#61; 9.8 # 9,8 m/s^2
l &#61; 0.7 # 70 cm
α &#61; 0
p &#61; &#91;l, g, α&#93;
θ₀ &#61; π/6
ω₀ &#61; 0.0
u₀ &#61; &#91;θ₀, ω₀&#93;
tspan2 &#61; &#40;0.0, 16.45&#41;
prob_pendulum2 &#61; ODEProblem&#40;dudt_pendulum&#33;, u₀, tspan2, p&#41;</code></pre>
<pre><code class="language-julia">ODEProblem with uType Vector&#123;Float64&#125; and tType Float64. In-place: true
timespan: &#40;0.0, 16.45&#41;
u0: 2-element Vector&#123;Float64&#125;:
 0.5235987755982988
 0.0</code></pre>
<pre><code class="language-julia">VideoIO.get_duration&#40;&quot;img/pendulo_70cm_1_reduzido.mov&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: Could not open img/pendulo_70cm_1_reduzido.mov. avformat_open_input 
error code -2</code></pre>
<pre><code class="language-julia">θ₀ &#61; π / 6
α &#61; 0.0 #-0.1
remake&#40;prob_pendulum2; u0 &#61; &#91;θ₀, 0.0&#93;, p &#61; &#91;l, g, α&#93;&#41;
sol2 &#61; solve&#40;prob_pendulum2, Tsit5&#40;&#41;; saveat &#61; 1/29.87&#41;
data2_scaled_x&#91;1:10&#93; .- sol2&#40;data2_scaled_t&#41;&#91;1,1:10&#93;
#length&#40;sol&#91;1,:&#93;&#41;
#sol&#40;data2_scaled_t&#41;&#91;1,:&#93;
sol&#40;data2_scaled_t&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data2_scaled_x not defined</code></pre>
<pre><code class="language-julia">plot&#40;data2_scaled_t, sol2&#40;data2_scaled_t&#41;&#91;1,:&#93;, label &#61; &quot;ODE&quot;, ylims&#61;&#40;-1,1&#41;&#41;
scatter&#33;&#40;data2_scaled_t, data2_scaled_x, label &#61; &quot;data&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data2_scaled_t not defined</code></pre>
<pre><code class="language-julia">function ddu_pendulum&#33;&#40;ddu, du, u, p, t&#41;
    θ &#61; u&#91;1&#93;
    ω &#61; du&#91;1&#93;
    l, g, α &#61; p
    ddu&#91;1&#93; &#61; - &#40;g / l&#41; * sin&#40;θ&#41; - α * ω
end</code></pre>
<pre><code class="language-julia">ddu_pendulum&#33; &#40;generic function with 1 method&#41;</code></pre>
<pre><code class="language-julia">θ₀ &#61; π / 6
ω₀ &#61; 0.0
α &#61; 0.05
l &#61; 0.72
p &#61; &#91;l, g, α&#93;
prob_pendulum_2nd &#61; SecondOrderODEProblem&#40;ddu_pendulum&#33;, &#91;ω₀&#93;, &#91;θ₀&#93;, tspan2, p&#41;
sol_2nd &#61; solve&#40;prob_pendulum_2nd&#41;
sol_2nd.retcode</code></pre>
<pre><code class="language-julia">:Success</code></pre>
<pre><code class="language-julia">plot&#40;data2_scaled_t, sol_2nd&#40;data2_scaled_t&#41;&#91;2,:&#93;, label &#61; &quot;ODE&quot;, ylims&#61;&#40;-1,1&#41;&#41;
scatter&#33;&#40;data2_scaled_t, data2_scaled_x, label &#61; &quot;data&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data2_scaled_t not defined</code></pre>
<pre><code class="language-julia">prob_rmk &#61; remake&#40;prob_pendulum_2nd; u0 &#61; ArrayPartition&#40;&#91;0.0&#93;, &#91;θ₀&#93;&#41;, p &#61; &#91;l, g, α&#93;&#41;
sol_rmk &#61; solve&#40;prob_rmk&#41;</code></pre>
<pre><code class="language-julia">retcode: Success
Interpolation: specialized 4th order &quot;free&quot; interpolation
t: 81-element Vector&#123;Float64&#125;:
  0.0
  0.00014665867806746294
  0.0016132454587420922
  0.016279113265488386
  0.05646261671975408
  0.1210661584895972
  0.20394094443174465
  0.3114428714445593
  0.4361696895237713
  0.5660126318578794
  ⋮
 14.757103758523856
 14.975837242139237
 15.220528172168207
 15.435739323889688
 15.681990504266405
 15.899891324886354
 16.144987068343934
 16.367029004899734
 16.45
u: 81-element Vector&#123;RecursiveArrayTools.ArrayPartition&#123;Float64, Tuple&#123;Vect
or&#123;Float64&#125;, Vector&#123;Float64&#125;&#125;&#125;&#125;:
 &#40;&#91;0.0&#93;, &#91;0.5235987755982988&#93;&#41;
 &#40;&#91;-0.0009980900796482302&#93;, &#91;0.523598702408922&#93;&#41;
 &#40;&#91;-0.010978532676025766&#93;, &#91;0.5235899199226164&#93;&#41;
 &#40;&#91;-0.11068567653652728&#93;, &#91;0.5226974863498236&#93;&#41;
 &#40;&#91;-0.3813143284771497&#93;, &#91;0.5127947624143488&#93;&#41;
 &#40;&#91;-0.7977890197442175&#93;, &#91;0.4745408968992312&#93;&#41;
 &#40;&#91;-1.268356249332695&#93;, &#91;0.38830121752424207&#93;&#41;
 &#40;&#91;-1.7078585641373931&#93;, &#91;0.22627879083954483&#93;&#41;
 &#40;&#91;-1.8891348315194079&#93;, &#91;-0.0020668325633487585&#93;&#41;
 &#40;&#91;-1.6627067086680587&#93;, &#91;-0.23711503637629103&#93;&#41;
 ⋮
 &#40;&#91;0.49103571221118436&#93;, &#91;-0.3359401762753514&#93;&#41;
 &#40;&#91;1.2181504266325172&#93;, &#91;-0.13835450159398452&#93;&#41;
 &#40;&#91;1.1421234168083245&#93;, &#91;0.17172686806385645&#93;&#41;
 &#40;&#91;0.35132874328089825&#93;, &#91;0.3409458558094231&#93;&#41;
 &#40;&#91;-0.7548617910520811&#93;, &#91;0.28745266963945754&#93;&#41;
 &#40;&#91;-1.2735027218362773&#93;, &#91;0.053843944407130785&#93;&#41;
 &#40;&#91;-0.93261168688129&#93;, &#91;-0.2363744318904869&#93;&#41;
 &#40;&#91;-0.008989184610849575&#93;, &#91;-0.34667806040764854&#93;&#41;
 &#40;&#91;0.36875503600834453&#93;, &#91;-0.33163121749061913&#93;&#41;</code></pre>
<pre><code class="language-julia">function objective&#40;β&#41;
    g &#61; 9.8
    ω₀ &#61; 0.0
    θ₀, l, α &#61; β
    p &#61; &#91;l, g, α&#93;
    tspan2 &#61; &#40;0.0, 16.45&#41;
    prob &#61; remake&#40;prob_pendulum_2nd, u0 &#61; ArrayPartition&#40;&#91;0.0&#93;, &#91;θ₀&#93;&#41;, p &#61; &#91;l, g, α&#93;&#41;
    sol &#61; solve&#40;prob&#41;
    #prob &#61; SecondOrderODEProblem&#40;ddu_pendulum&#33;, &#91;ω₀&#93;, &#91;θ₀&#93;, tspan2, p&#41;
    #sol &#61; solve&#40;prob&#41;
    return mse&#40;data2_scaled_x, sol&#40;data2_scaled_t&#41;&#91;2,:&#93;&#41;
end</code></pre>
<pre><code class="language-julia">objective &#40;generic function with 1 method&#41;</code></pre>
<pre><code class="language-julia">res &#61; Optim.optimize&#40;objective, &#91;π / 3, 0.7, 0.0&#93;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data2_scaled_t not defined</code></pre>
<pre><code class="language-julia">θ₀, l, α &#61; Optim.minimizer&#40;res&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: res not defined</code></pre>
<pre><code class="language-julia">π / θ₀</code></pre>
<pre><code class="language-julia">6.0</code></pre>
<pre><code class="language-julia">θ₀ - π / 5.6529</code></pre>
<pre><code class="language-julia">-0.032150070761939875</code></pre>
<pre><code class="language-julia">prob_rmk &#61; remake&#40;prob_pendulum_2nd, u0 &#61; ArrayPartition&#40;&#91;0.0&#93;, &#91;θ₀&#93;&#41;, p &#61; &#91;l, g, α&#93;&#41;</code></pre>
<pre><code class="language-julia">ODEProblem with uType RecursiveArrayTools.ArrayPartition&#123;Float64, Tuple&#123;Vec
tor&#123;Float64&#125;, Vector&#123;Float64&#125;&#125;&#125; and tType Float64. In-place: true
timespan: &#40;0.0, 16.45&#41;
u0: &#40;&#91;0.0&#93;, &#91;0.5235987755982988&#93;&#41;</code></pre>
<pre><code class="language-julia">sol_2nd &#61; solve&#40;prob_rmk&#41;
sol_2nd.retcode</code></pre>
<pre><code class="language-julia">:Success</code></pre>
<pre><code class="language-julia">plot&#40;data2_scaled_t, sol_2nd&#40;data2_scaled_t&#41;&#91;2,:&#93;, label &#61; &quot;ODE&quot;, ylims&#61;&#40;-1,1&#41;&#41;
scatter&#33;&#40;data2_scaled_t, data2_scaled_x, label &#61; &quot;data&quot;&#41;</code></pre>
<pre><code class="language-julia">Error: UndefVarError: data2_scaled_t not defined</code></pre>

    


<div class="page-foot">
    
        <div class="license">
            <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/>(CC BY-NC-ND 4.0) Attribution-NonCommercial-NoDerivatives 4.0 International </a>
            
        </div>
    

    Last modified: May 31, 2022. Built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a>.
</div><!-- CONTENT ENDS HERE -->

      </div> <!-- .books-content -->
    </div> <!-- .books-container -->

    

    
        <script src="/modelagem_matematica/libs/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();hljs.configure({tabReplace: '    '});</script>
    

  </body>
</html>
